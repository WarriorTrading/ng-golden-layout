!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("golden-layout"),require("@angular/core"),require("@angular/common")):"function"==typeof define&&define.amd?define("@warriortrading/ng-golden-layout",["exports","golden-layout","@angular/core","@angular/common"],e):e((t.warriortrading=t.warriortrading||{},t.warriortrading["ng-golden-layout"]={}),t.GoldenLayout,t.ng.core,t.ng.common)}(this,function(t,o,a,e){"use strict";var n=new a.InjectionToken("GoldenLayoutConfiguration");function r(e,a,l,s){return new(l||(l=Promise))(function(t,o){function n(t){try{r(s.next(t))}catch(e){o(e)}}function i(t){try{r(s["throw"](t))}catch(e){o(e)}}function r(e){e.done?t(e.value):new l(function(t){t(e.value)}).then(n,i)}r((s=s.apply(e,a||[])).next())})}function l(n,i){var r,a,l,t,s={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return t={next:e(0),"throw":e(1),"return":e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function o(t){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,a&&(l=2&t[0]?a["return"]:t[0]?a["throw"]||((l=a["return"])&&l.call(a),0):a.next)&&!(l=l.call(a,t[1])).done)return l;switch(a=0,l&&(t=[2&t[0],l.value]),t[0]){case 0:case 1:l=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,a=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(l=0<(l=s.trys).length&&l[l.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!l||t[1]>l[0]&&t[1]<l[3])){s.label=t[1];break}if(6===t[0]&&s.label<l[1]){s.label=l[1],l=t;break}if(l&&s.label<l[2]){s.label=l[2],s.ops.push(t);break}l[2]&&s.ops.pop(),s.trys.pop();continue}t=i.call(n,s)}catch(e){t=[6,e],a=0}finally{r=l=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([e,t])}}}function s(t,e){var o="function"==typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,i,r=o.call(t),a=[];try{for(;(void 0===e||0<e--)&&!(n=r.next()).done;)a.push(n.value)}catch(l){i={error:l}}finally{try{n&&!n.done&&(o=r["return"])&&o.call(r)}finally{if(i)throw i.error}}return a}var i=new a.InjectionToken("GoldenLayoutStateStore"),u="$ng-golden-layout-state",c=(d.prototype.writeState=function(t){localStorage.setItem(this.key,JSON.stringify(t))},d.prototype.loadState=function(){var t=localStorage.getItem(this.key);return t?Promise.resolve(JSON.parse(t)):Promise.reject("No state found using key: "+this.key)},d);function d(t){this.key=t}function p(){return new c(u)}var f=new c(u),h={provide:i,useFactory:p},y=(g.prototype.initialize=function(o,n){var t=this;this._layout=o,this.config.components.forEach(function(t){var e=n.createComponentInitCallback(t.component);o.registerComponent(t.componentName,e)}),this.stateStore&&o.on("stateChanged",function(){t._saveState(o)})},g.prototype._saveState=function(t){if(this.stateStore&&t.isInitialised)try{this.stateStore.writeState(t.toConfig())}catch(e){}},g.prototype.getState=function(){var t=this;return this.stateStore?this.stateStore.loadState()["catch"](function(){return t.config.defaultLayout}):Promise.resolve(this.config.defaultLayout)},g.prototype.isInited=function(){return null!=this._layout&&this._layout.isInitialised},g.prototype.waitForInited=function(i){return r(this,void 0,void 0,function(){var e,o,n;return l(this,function(t){switch(t.label){case 0:e=10,o=(o=Math.floor(1e3*i/e))<1?1:o,n=0,t.label=1;case 1:return n<o?this.isInited()?[2,!0]:[4,this.delay(e)]:[3,4];case 2:t.sent(),t.label=3;case 3:return n++,[3,1];case 4:return[2,!1]}})})},g.prototype.delay=function(e){return r(this,void 0,void 0,function(){return l(this,function(t){switch(t.label){case 0:return[4,new Promise(function(t){return setTimeout(t,e)})];case 1:return t.sent(),[2]}})})},g.prototype.getRegisteredComponents=function(){return this.config.components},g.prototype.getRegisteredComponent=function(t){for(var e=0;e<this.config.components.length;e++){var o=this.config.components[e];if(o.componentName===t)return o}return null},g.prototype.childOfRoot=function(){if(null==this._layout||null==this._layout.root)throw new Error("no root in layout");if(null==this._layout.root.contentItems||0===this._layout.root.contentItems.length)throw new Error("no child in root ");return this._layout.root.contentItems[0]},g.prototype.addStack=function(t,e){if(null==t)throw new Error("cannot add stack to null item");if(null!=e&&null!=e.id&&0<t.getItemsById(e.id).length)throw new Error("there already exists a item with same id: "+e.id+" in parent!");var o=this._layout.createContentItem(Object.assign({type:"stack"},e));return t.addChild(o),o},g.prototype.addComponent=function(t,e,o){if(null==t)throw new Error("cannot add component to null item");if(null!=o&&null!=o.id&&0<t.getItemsById(o.id).length)throw new Error("there already exists a item with same id: "+o.id+" in parent!");var n=this._layout.createContentItem(Object.assign({type:"component",componentName:e.componentName},o));return t.addChild(n),n},g.prototype.currentConfig=function(){return JSON.stringify(this._layout.toConfig(),null,2)},g.prototype.isChildWindow=function(){return!!window.opener},g.prototype.getRootWindow=function(){return window.opener||window},g.decorators=[{type:a.Injectable}],g.ctorParameters=function(){return[{type:n,decorators:[{type:a.Inject,args:[n]}]},{type:undefined,decorators:[{type:a.Optional},{type:a.Inject,args:[i]}]}]},g);function g(t,e){this.config=t,this.stateStore=e,this._layout=null}var w=new a.InjectionToken("GoldenLayoutContainer"),v=new a.InjectionToken("GoldenLayoutComponentState");var m=(_.prototype.ngOnInit=function(){var l=this;a.isDevMode()&&console.log("Init@"+(this.isChildWindow?"child":"root")+"!");var t=this.topWindow;this.isChildWindow||(t.__apprefs=[],t.__injector=this.injector),t.__apprefs.push(this.appref),this.appref.__tick=this.appref.tick,this.appref.tick=function(){function t(t){t._zone.run(function(){return t.__tick()})}var e,o;try{for(var n=function r(t){var e="function"==typeof Symbol&&t[Symbol.iterator],o=0;return e?e.call(t):{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}}}(l.topWindow.__apprefs),i=n.next();!i.done;i=n.next())t(i.value)}catch(a){e={error:a}}finally{try{i&&!i.done&&(o=n["return"])&&o.call(n)}finally{if(e)throw e.error}}},this.glService.getState().then(function(t){l._createLayout(t)})},_.prototype.ngOnDestroy=function(){a.isDevMode()&&console.log("Destroy@"+(this.isChildWindow?"child":"root")+"!"),this.isChildWindow&&(console.log=console.__log),this.unloaded=!0,this.appref.tick=this.appref.__tick},_.prototype.unloadHandler=function(){if(a.isDevMode()&&console.log("Unload@"+(this.isChildWindow?"child":"root")),!this.unloaded&&(this.unloaded=!0,this.isChildWindow)){var t=this.topWindow.__apprefs.indexOf(this.appref);this.topWindow.__apprefs.splice(t,1)}},_.prototype._createLayout=function(t){this.goldenLayout=new o(t,$(this.el.nativeElement)),this.glService.initialize(this.goldenLayout,this),this.goldenLayout.init()},_.prototype.onResize=function(t){this.goldenLayout&&this.goldenLayout.updateSize()},_.prototype.createComponentInitCallback=function(r){var a=this;return function(n,i){a.ngZone.run(function(){var t=a.componentFactoryResolver.resolveComponentFactory(r),e=a._createComponentInjector(n,i),o=a.viewContainer.createComponent(t,undefined,e);n.getElement().append($(o.location.nativeElement)),a._bindEventHooks(n,o.instance),n.on("destroy",function(){$(o.location.nativeElement).remove(),o.destroy()})})}},_.prototype._createComponentInjector=function(t,e){return a.Injector.create([{provide:w,useValue:t},{provide:v,useValue:e},{provide:o,useValue:this.goldenLayout}],this.injector)},_.prototype._bindEventHooks=function(t,e){!function o(t){return"object"==typeof t&&"function"==typeof t.glOnResize}(e)||t.on("resize",function(){e.glOnResize()}),function n(t){return"object"==typeof t&&"function"==typeof t.glOnShow}(e)&&t.on("show",function(){e.glOnShow()}),function i(t){return"object"==typeof t&&"function"==typeof t.glOnHide}(e)&&t.on("hide",function(){e.glOnHide()}),function r(t){return"object"==typeof t&&"function"==typeof t.glOnTab}(e)&&t.on("tab",function(t){e.glOnTab(t)})},_.decorators=[{type:a.Component,args:[{selector:"golden-layout-root",template:'<div class="ng-golden-layout-root" #glroot></div>',styles:["\n    .ng-golden-layout-root {\n      width:100%;\n      height:100%;\n    }"]}]}],_.ctorParameters=function(){return[{type:y},{type:a.ViewContainerRef},{type:a.ApplicationRef},{type:a.ComponentFactoryResolver},{type:a.NgZone},{type:a.Injector}]},_.propDecorators={el:[{type:a.ViewChild,args:["glroot"]}],unloadHandler:[{type:a.HostListener,args:["window:beforeunload"]}],onResize:[{type:a.HostListener,args:["window:resize",["$event"]]}]},_);function _(t,e,o,n,i,r){this.glService=t,this.viewContainer=e,this.appref=o,this.componentFactoryResolver=n,this.ngZone=i,this.injector=r,this.unloaded=!1,this.topWindow=t.getRootWindow(),this.isChildWindow=t.isChildWindow(),this.isChildWindow&&(window.document.title=window.document.URL,console.__log=console.log,console.log=this.topWindow.console.log),a.isDevMode()&&console.log("Create@"+(this.isChildWindow?"child":"root")+"!")}var S=(C.forRoot=function(t){return{ngModule:C,providers:[y,{provide:n,useValue:t}]}},C.decorators=[{type:a.NgModule,args:[{declarations:[m],exports:[m],imports:[e.CommonModule]}]}],C);function C(){}t.GoldenLayoutConfiguration=n,t.GoldenLayoutContainer=w,t.GoldenLayoutComponentState=v,t.GoldenLayoutComponent=m,t.GoldenLayoutService=y,t.GoldenLayoutModule=S,t.DEFAULT_LOCAL_STORAGE_STATE_STORE_FACTORY=p,t.GoldenLayoutStateStore=i,t.DEFAULT_LOCAL_STORAGE_STATE_STORE_KEY=u,t.LocalStorageStateStore=c,t.DEFAULT_LOCAL_STORAGE_STATE_STORE=f,t.DEFAULT_LOCAL_STORAGE_STATE_STORE_PROVIDER=h,t.MultiWindowInit=function b(){window.opener||(window.__services=new window.Map,window.__serviceConstructors=new window.Map)},t.MultiWindowService=function L(){return function(t){var r=t;return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var o=window.opener||window;if(!o.__services.has(r.name)){var n=o.__serviceConstructors.get(r.name)||r;o.__services.set(r.name,new(n.bind.apply(n,function i(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(s(arguments[e]));return t}([void 0],t))))}return o.__services.get(r.name)}}},Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=warriortrading-ng-golden-layout.umd.min.js.map