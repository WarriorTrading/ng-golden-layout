!function(t,o){"object"==typeof exports&&"undefined"!=typeof module?o(exports,require("golden-layout"),require("@angular/core"),require("@angular/common")):"function"==typeof define&&define.amd?define("@warriortrading/ng-golden-layout",["exports","golden-layout","@angular/core","@angular/common"],o):o((t.warriortrading=t.warriortrading||{},t.warriortrading["ng-golden-layout"]={}),t.GoldenLayout,t.ng.core,t.ng.common)}(this,function(t,e,a,o){"use strict";var n=new a.InjectionToken("GoldenLayoutConfiguration");function s(t,o){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var n,i,r=e.call(t),a=[];try{for(;(void 0===o||0<o--)&&!(n=r.next()).done;)a.push(n.value)}catch(s){i={error:s}}finally{try{n&&!n.done&&(e=r["return"])&&e.call(r)}finally{if(i)throw i.error}}return a}var i=new a.InjectionToken("GoldenLayoutStateStore"),r="$ng-golden-layout-state",l=(c.prototype.writeState=function(t){localStorage.setItem(this.key,JSON.stringify(t))},c.prototype.loadState=function(){var t=localStorage.getItem(this.key);return t?Promise.resolve(JSON.parse(t)):Promise.reject("No state found using key: "+this.key)},c);function c(t){this.key=t}function u(){return new l(r)}var d=new l(r),p={provide:i,useFactory:u},f=(h.prototype.initialize=function(e,n){var t=this;this._layout=e,this.config.components.forEach(function(t){var o=n.createComponentInitCallback(t.component);e.registerComponent(t.componentName,o)}),this.stateStore&&e.on("stateChanged",function(){t._saveState(e)})},h.prototype._saveState=function(t){if(this.stateStore&&t.isInitialised)try{this.stateStore.writeState(t.toConfig())}catch(o){}},h.prototype.getState=function(){var t=this;return this.stateStore?this.stateStore.loadState()["catch"](function(){return t.config.defaultLayout}):Promise.resolve(this.config.defaultLayout)},h.prototype.getRegisteredComponents=function(){return this.config.components},h.prototype.getRegisteredComponent=function(t){for(var o=0;o<this.config.components.length;o++){var e=this.config.components[o];if(e.componentName===t)return e}return null},h.prototype.childOfRoot=function(){if(null==this._layout||null==this._layout.root||null==this._layout.root.contentItems||0===this._layout.root.contentItems.length)throw new Error("no child in root ");return this._layout.root.contentItems[0]},h.prototype.addStack=function(t,o){if(null==t)throw new Error("cannot add stack to null item");if(null!=o&&null!=o.id&&0<t.getItemsById(o.id).length)throw new Error("there already exists a item with same id: "+o.id+" in parent!");var e=this._layout.createContentItem(Object.assign({type:"stack"},o));return t.addChild(e),e},h.prototype.addComponent=function(t,o,e){if(null==t)throw new Error("cannot add component to null item");if(null!=e&&null!=e.id&&0<t.getItemsById(e.id).length)throw new Error("there already exists a item with same id: "+e.id+" in parent!");var n=this._layout.createContentItem(Object.assign({type:"component",componentName:o.componentName},e));return t.addChild(n),n},h.prototype.currentConfig=function(){return JSON.stringify(this._layout.toConfig(),null,2)},h.prototype.isChildWindow=function(){return!!window.opener},h.prototype.getRootWindow=function(){return window.opener||window},h.decorators=[{type:a.Injectable}],h.ctorParameters=function(){return[{type:n,decorators:[{type:a.Inject,args:[n]}]},{type:undefined,decorators:[{type:a.Optional},{type:a.Inject,args:[i]}]}]},h);function h(t,o){this.config=t,this.stateStore=o,this._layout=null}var y=new a.InjectionToken("GoldenLayoutContainer"),g=new a.InjectionToken("GoldenLayoutComponentState");var w=(m.prototype.ngOnInit=function(){var s=this;a.isDevMode()&&console.log("Init@"+(this.isChildWindow?"child":"root")+"!");var t=this.topWindow;this.isChildWindow||(t.__apprefs=[],t.__injector=this.injector),t.__apprefs.push(this.appref),this.appref.__tick=this.appref.tick,this.appref.tick=function(){function t(t){t._zone.run(function(){return t.__tick()})}var o,e;try{for(var n=function r(t){var o="function"==typeof Symbol&&t[Symbol.iterator],e=0;return o?o.call(t):{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}(s.topWindow.__apprefs),i=n.next();!i.done;i=n.next())t(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(e=n["return"])&&e.call(n)}finally{if(o)throw o.error}}},this.glService.getState().then(function(t){s._createLayout(t)})},m.prototype.ngOnDestroy=function(){a.isDevMode()&&console.log("Destroy@"+(this.isChildWindow?"child":"root")+"!"),this.isChildWindow&&(console.log=console.__log),this.unloaded=!0,this.appref.tick=this.appref.__tick},m.prototype.unloadHandler=function(){if(a.isDevMode()&&console.log("Unload@"+(this.isChildWindow?"child":"root")),!this.unloaded&&(this.unloaded=!0,this.isChildWindow)){var t=this.topWindow.__apprefs.indexOf(this.appref);this.topWindow.__apprefs.splice(t,1)}},m.prototype._createLayout=function(t){this.goldenLayout=new e(t,$(this.el.nativeElement)),this.glService.initialize(this.goldenLayout,this),this.goldenLayout.init()},m.prototype.onResize=function(t){this.goldenLayout&&this.goldenLayout.updateSize()},m.prototype.createComponentInitCallback=function(r){var a=this;return function(n,i){a.ngZone.run(function(){var t=a.componentFactoryResolver.resolveComponentFactory(r),o=a._createComponentInjector(n,i),e=a.viewContainer.createComponent(t,undefined,o);n.getElement().append($(e.location.nativeElement)),a._bindEventHooks(n,e.instance),n.on("destroy",function(){$(e.location.nativeElement).remove(),e.destroy()})})}},m.prototype._createComponentInjector=function(t,o){return a.Injector.create([{provide:y,useValue:t},{provide:g,useValue:o},{provide:e,useValue:this.goldenLayout}],this.injector)},m.prototype._bindEventHooks=function(t,o){!function e(t){return"object"==typeof t&&"function"==typeof t.glOnResize}(o)||t.on("resize",function(){o.glOnResize()}),function n(t){return"object"==typeof t&&"function"==typeof t.glOnShow}(o)&&t.on("show",function(){o.glOnShow()}),function i(t){return"object"==typeof t&&"function"==typeof t.glOnHide}(o)&&t.on("hide",function(){o.glOnHide()}),function r(t){return"object"==typeof t&&"function"==typeof t.glOnTab}(o)&&t.on("tab",function(t){o.glOnTab(t)})},m.decorators=[{type:a.Component,args:[{selector:"golden-layout-root",template:'<div class="ng-golden-layout-root" #glroot></div>',styles:["\n    .ng-golden-layout-root {\n      width:100%;\n      height:100%;\n    }"]}]}],m.ctorParameters=function(){return[{type:f},{type:a.ViewContainerRef},{type:a.ApplicationRef},{type:a.ComponentFactoryResolver},{type:a.NgZone},{type:a.Injector}]},m.propDecorators={el:[{type:a.ViewChild,args:["glroot"]}],unloadHandler:[{type:a.HostListener,args:["window:beforeunload"]}],onResize:[{type:a.HostListener,args:["window:resize",["$event"]]}]},m);function m(t,o,e,n,i,r){this.glService=t,this.viewContainer=o,this.appref=e,this.componentFactoryResolver=n,this.ngZone=i,this.injector=r,this.unloaded=!1,this.topWindow=t.getRootWindow(),this.isChildWindow=t.isChildWindow(),this.isChildWindow&&(window.document.title=window.document.URL,console.__log=console.log,console.log=this.topWindow.console.log),a.isDevMode()&&console.log("Create@"+(this.isChildWindow?"child":"root")+"!")}var v=(_.forRoot=function(t){return{ngModule:_,providers:[f,{provide:n,useValue:t}]}},_.decorators=[{type:a.NgModule,args:[{declarations:[w],exports:[w],imports:[o.CommonModule]}]}],_);function _(){}t.GoldenLayoutConfiguration=n,t.GoldenLayoutContainer=y,t.GoldenLayoutComponentState=g,t.GoldenLayoutComponent=w,t.GoldenLayoutService=f,t.GoldenLayoutModule=v,t.DEFAULT_LOCAL_STORAGE_STATE_STORE_FACTORY=u,t.GoldenLayoutStateStore=i,t.DEFAULT_LOCAL_STORAGE_STATE_STORE_KEY=r,t.LocalStorageStateStore=l,t.DEFAULT_LOCAL_STORAGE_STATE_STORE=d,t.DEFAULT_LOCAL_STORAGE_STATE_STORE_PROVIDER=p,t.MultiWindowInit=function C(){window.opener||(window.__services=new window.Map,window.__serviceConstructors=new window.Map)},t.MultiWindowService=function S(){return function(t){var r=t;return function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];var e=window.opener||window;if(!e.__services.has(r.name)){var n=e.__serviceConstructors.get(r.name)||r;e.__services.set(r.name,new(n.bind.apply(n,function i(){for(var t=[],o=0;o<arguments.length;o++)t=t.concat(s(arguments[o]));return t}([void 0],t))))}return e.__services.get(r.name)}}},Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=warriortrading-ng-golden-layout.umd.min.js.map